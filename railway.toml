# -----------------------------------------------------------
# BACKEND SERVICE (protective-playfulness)
# -----------------------------------------------------------
[protective-playfulness.build]
builder = "dockerfile"
dockerfilePath = "backend/Dockerfile"
dockerContext = "."
# Rebuild only when backend files or config change
watchPatterns = ["backend/**", "railway.toml"]

[protective-playfulness.deploy]
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

# -----------------------------------------------------------
# FRONTEND SERVICE (portfolio-manager)
# -----------------------------------------------------------
[portfolio-manager.build]
builder = "dockerfile"
dockerfilePath = "frontend/Dockerfile"
dockerContext = "."
# Rebuild only when frontend files or config change
watchPatterns = ["frontend/**", "railway.toml"]

[portfolio-manager.deploy]
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10